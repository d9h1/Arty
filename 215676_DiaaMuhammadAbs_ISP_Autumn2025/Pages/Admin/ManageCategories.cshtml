@page
@model _215676_DiaaMuhammadAbs_ISP_Autumn2025.Pages.Admin.ManageCategoriesModel
@{
    ViewData["Title"] = "Manage Categories";
}

<div class="dashboard-container">
    <div class="dashboard-content admin-content">

        <aside class="dashboard-sidebar admin-sidebar">
            <a asp-page="/Admin/Dashboard" class="sidebar-link">Dashboard</a>
            <a asp-page="/Admin/ManageUsers" class="sidebar-link">Manage Users</a>
            <a asp-page="/Admin/ManageProducts" class="sidebar-link">Manage Products</a>
            <a asp-page="/Admin/ManageCategories" class="sidebar-link active">Manage Categories</a>
            <a asp-page="/Admin/ManageOrders" class="sidebar-link">Manage Orders</a>
        </aside>

        <main class="dashboard-main admin-main">
            <header class="admin-header">
                <h1>🏷️ Manage Product Categories</h1>
                <p>View, create, or delete product categories.</p>
            </header>


            <div class="action-bar content-section-mini">
                <a asp-page="./CreateCategory" class="btn btn-primary add-new-btn">
                    <i class="fas fa-plus-circle"></i> Add New Category
                </a>
            </div>

            <div class="table-responsive content-section-mini">
                @if (Model.Category == null || !Model.Category.Any())
                {
                    <div class="alert alert-info" role="alert">
                        No categories found. Please create a new category.
                    </div>
                }
                else
                {
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Order</th>
                                <th>Icon</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Category)
                            {
                                <tr>
                                    <td>@item.Id</td>
                                    <td>@item.Name</td>
                                    <td>@item.DisplayOrder</td>
                                    <td><i class="me-2 @item.Icon"></i> @item.Icon</td>
                                    <td>
                                        <form method="post" asp-page-handler="Delete" asp-route-id="@item.Id" onsubmit="return confirm('Are you sure you want to delete this category: @item.Name?');" style="display: inline;">
                                            <input type="hidden" name="id" value="@item.Id" />
                                            <button type="submit" class="btn btn-action delete-btn" title="Delete">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            </div>
        </main>
    </div>
</div>